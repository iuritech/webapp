<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Tonytectos</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico"/>
    <!-- Bootstrap Icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic" rel="stylesheet" type="text/css" />
    <!-- SimpleLightbox plugin CSS-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/SimpleLightbox/2.1.0/simpleLightbox.min.css" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
  </head>
<style>
body{
background-color:LightGray;
}
th{
font-size:120%;
}
</style>
<body>

<div id="data">
        <table id="data-table" class='table table-striped table-dark'>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nome</th>
                </tr>
            </thead>
            <tbody>
                <!-- Data will be inserted here -->
            </tbody>
        </table>
    </div>
    <script>
        // Fetch data from the server
        async function fetchData() {
            try {
                const response = await fetch('/data');
                const data = await response.json();

                // Get the table body element
                const tableBody = document.querySelector('#data-table tbody');

                // Clear any existing rows
                tableBody.innerHTML = '';

                // Create table rows for each data item
                data.forEach(item => {
                    const row = document.createElement('tr');

                    const idCell = document.createElement('td');
                    idCell.textContent = item.id;
                    row.appendChild(idCell);

                    const nameCell = document.createElement('td');
                    nameCell.textContent = item.artigos;
                    row.appendChild(nameCell);

                    tableBody.appendChild(row);
                });
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }

        // Call fetchData when the page loads
        window.onload = fetchData;
    </script>

  <!--php code
  <div>
  <?php
  session_start();
  include "basedados.h";
  $sql = "SELECT id,nome,preco FROM artigos";
  if ($result = mysqli_query($conn, $sql)) {
// Fetch one and one row
    echo "<table class='table table-striped table-dark'>";
    echo'<th scope="col">Nome</th>';
    echo'<th scope="col">Pre√ßo</th>';
    echo'<th scope="col"><a href="addArtigo.php">Adicionar artigo</a></th>';
    while ($row = mysqli_fetch_array($result)) {
      echo "<tr><td scope='col'>";
      print($row["nome"]);
      echo"</td><td scope='col'>";
      print($row["preco"]);
      echo"</td><td scope='col'>";
	echo "<form method='post'><input type='hidden' name='delete_id' value='".$row["id"]."'><input type='submit' value='Delete'></form>";
      echo "</td></tr>";
    }
    echo "</table>";
    mysqli_free_result($result);
    if(isset($_POST['delete_id'])) {
	    $id_to_delete = $_POST['delete_id'];
	    $sql = "DELETE FROM artigos WHERE id = $id_to_delete";
	    if (mysqli_query($conn, $sql)) {
		echo "Record deleted successfully";
	    } else {
		echo "Error deleting record: " . $conn->error;
	    }
    }
}
    
?>-->
</body>
</html>
